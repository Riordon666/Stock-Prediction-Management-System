<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>股票预测 - 股票预测系统</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}" />
</head>

<body>
    <div class="container">
        <div class="topbar">
            <div class="brand">
                <div class="logo" aria-hidden="true"></div>
                <div style="min-width: 0;">
                    <h1>股票预测系统</h1>
                </div>
            </div>

            <nav class="topnav" aria-label="主导航">
                <a class="nav-item" href="/">首页</a>
                <a class="nav-item" href="/analysis">股票分析</a>
                <a class="nav-item" href="/predict">股票预测</a>
            </nav>

            <label class="switch">
                <input id="input" type="checkbox" />
                <div class="slider round">
                    <div class="sun-moon">
                        <svg id="moon-dot-1" class="moon-dot" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="moon-dot-2" class="moon-dot" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="moon-dot-3" class="moon-dot" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="light-ray-1" class="light-ray" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="light-ray-2" class="light-ray" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="light-ray-3" class="light-ray" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>

                        <svg id="cloud-1" class="cloud-dark" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="cloud-2" class="cloud-dark" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="cloud-3" class="cloud-dark" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="cloud-4" class="cloud-light" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="cloud-5" class="cloud-light" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                        <svg id="cloud-6" class="cloud-light" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="50"></circle>
                        </svg>
                    </div>
                    <div class="stars">
                        <svg id="star-1" class="star" viewBox="0 0 20 20">
                            <path
                              d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"
                            ></path>
                        </svg>
                        <svg id="star-2" class="star" viewBox="0 0 20 20">
                            <path
                              d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"
                            ></path>
                        </svg>
                        <svg id="star-3" class="star" viewBox="0 0 20 20">
                            <path
                              d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"
                            ></path>
                        </svg>
                        <svg id="star-4" class="star" viewBox="0 0 20 20">
                            <path
                              d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"
                            ></path>
                        </svg>
                    </div>
                </div>
            </label>
        </div>

        <section class="section">
            <div class="card">
                <div class="card-header">
                    <h2>股票预测</h2>
                    <div class="hint">占位页面：后续再补预测参数、预测结果、趋势图等。</div>
                </div>
                <div class="card-body">
                    <div class="placeholder">股票预测页面内容（占位）</div>
                </div>
            </div>
        </section>

        <footer>
            <div>© 基于Flask的股票预测管理系统设计与实现</div>
        </footer>
    </div>

    <script>
        (function () {
            var THEME_KEY = 'theme';
            var toggle = document.getElementById('input');
            if (!toggle) return;

            function getInitialTheme() {
                try {
                    var saved = localStorage.getItem(THEME_KEY);
                    if (saved === 'light' || saved === 'dark') return saved;
                } catch (e) {}
                return 'dark';
            }

            function applyTheme(theme) {
                var isLight = theme === 'light';
                document.documentElement.classList.toggle('light', isLight);
                document.body.classList.toggle('light', isLight);
                toggle.checked = !isLight;
                try {
                    localStorage.setItem(THEME_KEY, theme);
                } catch (e) {}
            }

            var currentTheme = getInitialTheme();
            var isAnimating = false;
            applyTheme(currentTheme);

            function prefersReducedMotion() {
                return !!(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches);
            }

            function getSwitchCenter() {
                var el = toggle.closest('.switch') || toggle;
                var rect = el.getBoundingClientRect();
                return {
                    x: rect.left + rect.width / 2,
                    y: rect.top + rect.height / 2
                };
            }

            function transitionTheme(nextTheme, done) {
                if (prefersReducedMotion() || !document.startViewTransition) {
                    applyTheme(nextTheme);
                    currentTheme = nextTheme;
                    done();
                    return;
                }

                var p = getSwitchCenter();
                var dx = Math.max(p.x, window.innerWidth - p.x);
                var dy = Math.max(p.y, window.innerHeight - p.y);
                var endRadius = Math.ceil(Math.sqrt(dx * dx + dy * dy)) + 30;

                var expand = currentTheme === 'dark' && nextTheme === 'light';
                var clipFrom = expand
                    ? 'circle(0px at ' + p.x + 'px ' + p.y + 'px)'
                    : 'circle(' + endRadius + 'px at ' + p.x + 'px ' + p.y + 'px)';
                var clipTo = expand
                    ? 'circle(' + endRadius + 'px at ' + p.x + 'px ' + p.y + 'px)'
                    : 'circle(0px at ' + p.x + 'px ' + p.y + 'px)';
                var pseudo = expand ? '::view-transition-new(root)' : '::view-transition-old(root)';

                var zVarsApplied = false;
                if (!expand) {
                    zVarsApplied = true;
                    document.documentElement.style.setProperty('--vt-old-z', '2');
                    document.documentElement.style.setProperty('--vt-new-z', '1');
                }

                var vt;
                try {
                    vt = document.startViewTransition(function () {
                        applyTheme(nextTheme);
                    });
                    currentTheme = nextTheme;
                } catch (e) {
                    applyTheme(nextTheme);
                    currentTheme = nextTheme;
                    done();
                    return;
                }

                vt.ready.then(function () {
                    document.documentElement.animate(
                        { clipPath: [clipFrom, clipTo] },
                        {
                            duration: 520,
                            easing: 'cubic-bezier(0.2, 0.9, 0.2, 1)',
                            pseudoElement: pseudo,
                            fill: 'both'
                        }
                    );
                });

                vt.finished.then(function () {
                    if (zVarsApplied) {
                        document.documentElement.style.removeProperty('--vt-old-z');
                        document.documentElement.style.removeProperty('--vt-new-z');
                    }
                    done();
                }, function () {
                    if (zVarsApplied) {
                        document.documentElement.style.removeProperty('--vt-old-z');
                        document.documentElement.style.removeProperty('--vt-new-z');
                    }
                    done();
                });
            }

            toggle.addEventListener('change', function () {
                if (isAnimating) {
                    applyTheme(currentTheme);
                    return;
                }

                var nextTheme = toggle.checked ? 'dark' : 'light';
                if (nextTheme === currentTheme) return;

                isAnimating = true;
                toggle.disabled = true;

                transitionTheme(nextTheme, function () {
                    toggle.disabled = false;
                    isAnimating = false;
                });
            });
        })();
    </script>
</body>
</html>
